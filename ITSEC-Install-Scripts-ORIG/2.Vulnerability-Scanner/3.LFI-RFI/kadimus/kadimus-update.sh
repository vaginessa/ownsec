#!/bin/bash

#1i
. /opt/ownsec/ITSEC-Install-Scripts-ORIG/001.functions/all-scripts.sh

GITREPO=https://github.com/P0cL4bs/Kadimus.git
BRANCH=master
GITREPOROOT=/opt/ITSEC/2.Vulnerability-Scanner/3.LFI-RFI/kadimus/P0cL4bs/Kadimus
GITCONFDIR=/opt/ITSEC/2.Vulnerability-Scanner/3.LFI-RFI/kadimus/P0cL4bs/Kadimus/.git
GITCLONEDIR=/opt/ITSEC/2.Vulnerability-Scanner/3.LFI-RFI/kadimus/P0cL4bs
EXECUTEABLE1=kadimus
EXECUTEABLE2=kadimus
#ph1b
DSKTPFLS=/opt/ownsec/ITSEC-Install-Scripts-ORIG/2.Vulnerability-Scanner/3.LFI-RFI/kadimus
DSKTPFLSDEST=/home/$USER/.local/share/applications/2.Vulnerability-Scanner/3.LFI-RFI/kadimus
DSKTPFL=kadimus.desktop
APTLSTDIR=/opt/ownsec/ITSEC-Install-Scripts-ORIG/2.Vulnerability-Scanner/3.LFI-RFI/kadimus
#hd6cv

echo "${bold}
 _  __    _    ____ ___ __  __ _   _ ____  
| |/ /   / \  |  _ \_ _|  \/  | | | / ___| 
| ' /   / _ \ | | | | || |\/| | | | \___ \ 
| . \  / ___ \| |_| | || |  | | |_| |___) |
|_|\_\/_/   \_\____/___|_|  |_|\___/|____/ 
UPDATE       
${normal}"

GITUPTODATE
if git checkout $BRANCH &&
git fetch origin $BRANCH &&
[ `git rev-list HEAD...origin/$BRANCH --count` != 0 ] &&
git merge origin/$BRANCH
then
    
GITCLONEFUNC

make clean
GITRESET

GITSBMDLINIT
./configure
make -j 4

CHMODXEX1
SYMLINKEX2TO1

#333d
CPDESKTFL

echo "${bold}
UPDATED
${normal}"

else

echo "${bold}
UP TO DATE
${normal}"
	
fi
