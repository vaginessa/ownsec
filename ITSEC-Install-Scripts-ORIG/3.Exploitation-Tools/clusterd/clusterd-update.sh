#!/bin/bash

#1i
. /opt/ownsec/ITSEC-Install-Scripts-ORIG/001.functions/all-scripts.sh

GITREPO=https://github.com/hatRiot/clusterd.git
BRANCH=master
GITREPOROOT=/opt/ITSEC/3.Exploitation-Tools/clusterd/hatRiot/clusterd
GITCONFDIR=/opt/ITSEC/3.Exploitation-Tools/clusterd/hatRiot/clusterd/.git
GITCLONEDIR=/opt/ITSEC/3.Exploitation-Tools/clusterd/hatRiot
EXECUTEABLE1=clusterd.sh
EXECUTEABLE2=clusterd
#ph1b
DSKTPFLS=/opt/ownsec/ITSEC-Install-Scripts-ORIG/3.Exploitation-Tools/clusterd
DSKTPFLSDEST=/home/$USER/.local/share/applications/3.Exploitation-Tools/clusterd
DSKTPFL=clusterd.desktop
APTLSTDIR=/opt/ownsec/ITSEC-Install-Scripts-ORIG/3.Exploitation-Tools/clusterd
#ph1a


echo "${bold}
  ____ _    _   _ ____ _____ _____ ____  ____  
 / ___| |  | | | / ___|_   _| ____|  _ \|  _ \ 
| |   | |  | | | \___ \ | | |  _| | |_) | | | |
| |___| |__| |_| |___) || | | |___|  _ <| |_| |
 \____|_____\___/|____/ |_| |_____|_| \_\____/ 
          
UPDATE
${normal}"
GITUPTODATE
if git checkout $BRANCH &&
git fetch origin $BRANCH &&
[ `git rev-list HEAD...origin/$BRANCH --count` != 0 ] &&
git merge origin/$BRANCH
then
GITCLONEFUNC
GITRESET
GITSBMDLINIT

sudo -H pip install requests

echo '#!/bin/bash

cd /opt/ITSEC/3.Exploitation-Tools/clusterd/hatRiot/clusterd

python clusterd.py "$@"' > $EXECUTEABLE1
sudo chmod +x $EXECUTEABLE1

SYMLINKEX2TO1
#333d
CPDESKTFL

echo "${bold}
UPDATED
${normal}"

else

echo "${bold}
UP TO DATE
${normal}"
	
fi
