#!/bin/bash

#1i
. /opt/ownsec/ITSEC-Install-Scripts-ORIG/001.functions/all-scripts.sh


GITREPO=https://github.com/SpiderLabs/jboss-autopwn.git
BRANCH=master
GITREPOROOT=/opt/ITSEC/3.Exploitation-Tools/jboss-autopwn/SpiderLabs/jboss-autopwn
GITCONFDIR=/opt/ITSEC/3.Exploitation-Tools/jboss-autopwn/SpiderLabs/jboss-autopwn/.git
GITCLONEDIR=/opt/ITSEC/3.Exploitation-Tools/jboss-autopwn/SpiderLabs
EXECUTEABLE1=e.sh
EXECUTEABLE2=jboss-linux
EXECUTEABLE3=e2.sh
EXECUTEABLE4=jboss-win
#ph1b
DSKTPFLS=/opt/ownsec/ITSEC-Install-Scripts-ORIG/3.Exploitation-Tools/jboss-autopwn
DSKTPFLSDEST=/home/$USER/.local/share/applications/3.Exploitation-Tools/jboss-autopwn
DSKTPFL1=jboss-linux.desktop
DSKTPFL2=jboss-win.desktop
APTLSTDIR=/opt/ownsec/ITSEC-Install-Scripts-ORIG/3.Exploitation-Tools/jboss-autopwn
#ph1a


echo "${bold}
     _ ____   ___  ____ ____    _   _   _ _____ ___  ______        ___   _ 
    | | __ ) / _ \/ ___/ ___|  / \ | | | |_   _/ _ \|  _ \ \      / / \ | |
 _  | |  _ \| | | \___ \___ \ / _ \| | | | | || | | | |_) \ \ /\ / /|  \| |
| |_| | |_) | |_| |___) |__) / ___ \ |_| | | || |_| |  __/ \ V  V / | |\  |
 \___/|____/ \___/|____/____/_/   \_\___/  |_| \___/|_|     \_/\_/  |_| \_|
       
UPDATE
${normal}"
GITUPTODATE
if git checkout $BRANCH &&
git fetch origin $BRANCH &&
[ `git rev-list HEAD...origin/$BRANCH --count` != 0 ] &&
git merge origin/$BRANCH
then
    
GITCLONEFUNC
GITRESET
GITSBMDLINIT


sudo rm -f $BINDIR/$EXECUTEABLE4
CHMODXEX1
SYMLINKEX2TO1
CHMODXEX3
sudo ln -s $GITREPOROOT/$EXECUTEABLE3 $BINDIR/$EXECUTEABLE4

mkdir -p $DSKTPFLSDEST
rm -f $DSKTPFLSDEST/$DSKTPFL1
rm -f $DSKTPFLSDEST/$DSKTPFL2
cp $DSKTPFLS/$DSKTPFL1 $DSKTPFLSDEST/$DSKTPFL1
#333d
cp $DSKTPFLS/$DSKTPFL2 $DSKTPFLSDEST/$DSKTPFL2

echo "${bold}
UPDATED
${normal}"

else

echo "${bold}
UP TO DATE
${normal}"
	
fi


